// TODO out of stock handle